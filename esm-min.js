const t=("dry-"+Math.random()).replace(".","");let e=1;const n=()=>t+e++,s="#inner#",o=/\{(?<content>t-\w[\-\w]+)\}/;function c(t){return r(t).attributes}function r(t){const e=document.getElementById(t),n=e.getAttribute("class"),c=e.content.cloneNode(!0),r=function(t){const e=t.querySelectorAll("*"),n=new Map;for(const t of e){const e=t.attributes;for(let s=0,c=e.length;s<c;s++){const{nodeName:c,nodeValue:r}=e.item(s),i=r.match(o);if(i){const e=f(t);n.get(e)||n.set(e,[]);const s="on"===c.substring(0,2)?{type:c.substring(2)}:null;n.get(e).push([c,i.groups.content,s])}}}return n}(c);var i;i=r,a(c,(function(t){if(0===t.childElementCount){const e=t.textContent.match(o);if(e){const n=f(t);i.get(n)||i.set(n,[]),i.get(n).push([s,e.groups.content])}}}));const l=new Set;for(const[,t]of r)for(const[e,n,s]of t)l.add(n);return{refClone:c,refData:r,attributes:[...l],tClass:n}}function i(){for(const t of[...document.getElementsByTagName("template")])l(t.id)}function l(t){if(!function(t){if(!t)return!1;const e=t.indexOf("-");return 0!==e&-1!==e}(t))return;const{refClone:e,refData:s,tClass:o}=r(t);customElements.define(t,class extends HTMLElement{constructor(){super()}connectedCallback(){this.connected||(this.connected=!0,this.style.display="block",this.hasAttribute("class")||this.setAttribute("class",o),this.tRefs=structuredClone(s),this.append(e.cloneNode(!0)),function(t){const e=[];for(const n of t.tRefs){const[s,o]=n,c=t.querySelector("#"+s);for(const[e,n,s]of o){u(c,e,t.getAttribute(n))}e.push([c,o,s])}for(const[s,o,c]of e){const e=n();s.setAttribute("id",e),t.tRefs.set(e,o),t.tRefs.delete(c)}}(this))}})}function u(t,e,n){e===s?t.innerText=n:"class"===e?(t.classList.remove(...t.classList),t.classList.add(n)):t.setAttribute(e,n)}function f(t){let e=t.getAttribute("id");return e||(e=n(),t.setAttribute("id",e)),e}function a(t,e){e(t),t.firstElementChild&&a(t.firstElementChild,e),t.nextElementSibling&&a(t.nextElementSibling,e)}export{l as defineCustomElement,i as defineCustomElements,c as getAttributes};
